<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="css/styles.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TU Translate</title>
    <script src="js/swapLanguages.js" type="text/javascript"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1264.0.js"></script>
    <script src="js/translate.js"></script>
    <script src="js/textToSpeech.js"></script>
    <script src="js/copyToClipboard.js"></script>
</head>
<body>
    <script src="js/nav_bar.js" type="text/javascript"></script>
    
    <main>
        <h1>File Translation</h1>

        <p>Choose language you are translating from: 
            <!-- 
                This select can be made so that every time the select value is changed, it translates the text.
                It works but the issue is we don't want to burn through characters since we're limited to 2 million.
                <select name="srcLang" id="srcLangSelect" onchange="translateUserText()"> -->
            <select name="srcLang" id="srcLangSelect">
            </select>
        </p>
        
        <script src="js/dragAndDrop.js"></script>

        <div
            id="drop_zone"
            class="disableSelect"
            ondrop="dropHandler(event);"
            ondragover="dragOverHandler(event);"
            >
            <p>Drag & Drop to Upload File <br>OR</p>
            <div class = "uploadFileButton">
                <form action="uploadFile">
                    <input type="file" id="inputFile" name="myFile">
                </form>
            </div>
        </div>
        <div class="textAreaContainer">
            <!-- 
                This textarea can be made so that every time the user makes an input, it translates the text.
                It works but the issue is we don't want to burn through characters since we're limited to 2 million.
                <textarea id="userTextArea" name="userText" oninput="translateUserText()" 
                    style="width:100%; font-size: 16pt" rows="6" cols="60" placeholder=" Enter text"></textarea><br> -->
            <textarea id="userTextArea" name="userText" 
                rows="6" cols="60" placeholder="Enter text"></textarea><br>
            <div class="col" style="float: left">
                <button class="swapSrcAndDstLangButton">
                    <img src="svg\text-to-speech-svgrepo-com.svg" alt="Text-to-Speech"/></button>
            </div>
        </div>
        <br>
        
        <div class="swapSrcAndDstLang">
            <button class="swapSrcAndDstLangButton" onclick="swapLang(), translateUserText()">
                <img src="svg/swap_vert.svg" alt="Swap Icon"/></button>
        </div>

        <br>
        Choose language to translate to:
        <!-- 
            This select can be made so that every time the select value is changed, it translates the text.
            It works but the issue is we don't want to burn through characters since we're limited to 2 million.
            <select name="dstLang" id="dstLangSelect" onchange="translateUserText()"> -->
        <select name="dstLang" id="dstLangSelect">
        </select><br><br>
        <button id="translateText" style="height:32px" onclick="translateUserText()">Click to Translate!</button>
        
        <br><br>
        Translated Text:
        <br>
        <div class="textAreaContainer">
            <textarea id="outputTextArea" name="outputText" 
                rows="6" cols="60" disabled placeholder="Translation" ></textarea>
            <div class="row">
                <div class="col" style="float: left">
                    <button id="outputTTS" class="textToSpeechButton" onclick="speakText(this.id)">
                        <img src="svg\text-to-speech-svgrepo-com.svg" alt="Text-to-Speech"/></button>
                </div>
            </div>
        </div>
        
        <audio id="audioPlayback" controls hidden>
            <source id="audioSource" type="audio/mp3" src="">
        </audio>
        <script src="https://sdk.amazonaws.com/js/aws-sdk-2.410.0.min.js"></script>


        <script type="text/javascript">
        document.getElementById("userTextArea").style.display="none";
        document.getElementById('inputFile')
            .addEventListener('change', function() {
            
            let reader = new FileReader();
            reader.onload = function(){
                document.getElementById("drop_zone").style.display="none";
                document.getElementById("userTextArea").style.display="block";
                document.getElementById('userTextArea').value=reader.result;
            }
            
            reader.readAsText(this.files[0]);

        })
        </script>
    </main>

    <script src="js/menuToggle.js"></script>
    <script src="js/langList.js"></script>
    <script src="js/populateLangDropDown.js"></script>
</body>
</html>
